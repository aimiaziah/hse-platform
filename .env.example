# Supabase Configuration
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url_here
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key_here
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key_here

# SharePoint/OneDrive OAuth Configuration (Optional)
# To enable automatic export to SharePoint/OneDrive:
# 1. Go to Azure Portal (portal.azure.com)
# 2. Navigate to Azure Active Directory > App registrations > New registration
# 3. Set Redirect URI to: http://localhost:8081/sharepoint-callback (for development) ⚠️ Port 8081
#    For production, add: https://your-domain.com/sharepoint-callback
# 4. Under "API permissions", add Microsoft Graph permissions:
#    - Files.ReadWrite (Delegated)
#    - Sites.ReadWrite.All (Delegated)
#    - offline_access (Delegated)
# 5. Copy the Application (client) ID and Directory (tenant) ID below

# =====================================================
# OPTION 1: POWER AUTOMATE (RECOMMENDED - No popup needed!)
# =====================================================
# Power Automate webhook URL for automatic SharePoint upload
# See POWER_AUTOMATE_SETUP.md for step-by-step guide
# This is the EASIEST and most RELIABLE way to upload to SharePoint
NEXT_PUBLIC_POWER_AUTOMATE_WEBHOOK_URL=

# =====================================================
# OPTION 2: SHAREPOINT OAUTH (Alternative - Requires popup)
# =====================================================
# Only use this if you can't use Power Automate

# SharePoint OAuth Client ID (from Azure App Registration)
# This is also used for Microsoft account login authentication
# IMPORTANT: After admin consent, users can login with their Microsoft accounts
NEXT_PUBLIC_SHAREPOINT_OAUTH_CLIENT_ID=

# SharePoint Tenant ID (from Azure App Registration)
# For COMPANY accounts: Use your specific tenant ID (requires admin consent)
# For PERSONAL + COMPANY: Use 'common' (may need admin consent)
# For PERSONAL ONLY: Use 'consumers' (NO admin consent needed!)
#
# How to get admin consent:
# 1. Ask your IT admin to visit: https://login.microsoftonline.com/{TENANT_ID}/adminconsent?client_id={CLIENT_ID}
# 2. Admin clicks "Accept" to grant permissions for the organization
# 3. All users can now login without seeing the consent popup
NEXT_PUBLIC_SHAREPOINT_TENANT_ID=common

# SharePoint Site Configuration (for uploading to team site instead of OneDrive)
# Full URL to your SharePoint site (e.g., https://yourcompany.sharepoint.com/sites/YourSite)
NEXT_PUBLIC_SHAREPOINT_SITE_URL=https://thetaedgebhd.sharepoint.com/sites/ThetaEdge

# Document library name (default: "Shared Documents")
NEXT_PUBLIC_SHAREPOINT_LIBRARY_NAME=Shared Documents

# Base folder within the library where inspection files will be stored (default: "HSE")
# Files will be organized as: {BASE_FOLDER}/{InspectionType}/{Year}/{Month}
# Example: HSE/Fire_Extinguisher/2025/January
NEXT_PUBLIC_SHAREPOINT_BASE_FOLDER=HSE

# Google Drive OAuth Configuration (Optional - alternative to SharePoint)
NEXT_PUBLIC_GOOGLE_CLIENT_ID=
NEXT_PUBLIC_GOOGLE_API_KEY=

# =====================================================
# CLOUDFLARE R2 STORAGE (RECOMMENDED - Zero Egress Fees!)
# =====================================================
# Cloudflare R2 for image storage - eliminates Supabase egress costs
# See CLOUDFLARE_R2_SETUP.md for step-by-step guide
# Zero egress fees! Only pay $0.015/GB storage per month

# R2 Account ID (found in Cloudflare Dashboard -> R2 -> Overview)
NEXT_PUBLIC_R2_ACCOUNT_ID=

# R2 Access Key ID (created in R2 -> Manage R2 API Tokens)
R2_ACCESS_KEY_ID=

# R2 Secret Access Key (created in R2 -> Manage R2 API Tokens)
R2_SECRET_ACCESS_KEY=

# R2 Bucket Name (the bucket you created for inspection images)
NEXT_PUBLIC_R2_BUCKET_NAME=inspection-images

# Optional: Custom domain for R2 public URLs (improves performance and branding)
# If not set, uses default R2 URL: https://{accountId}.r2.cloudflarestorage.com/{bucket}/{key}
# Setup custom domain in Cloudflare Dashboard -> R2 -> Your Bucket -> Settings -> Public Access
NEXT_PUBLIC_R2_PUBLIC_DOMAIN=

# =====================================================
# DIGITALOCEAN SPACES (RECOMMENDED FOR STUDENTS - FREE with GitHub Education Pack!)
# =====================================================
# Get $200 FREE credit with GitHub Student Developer Pack
# See DIGITALOCEAN_SETUP.md for step-by-step guide
# Includes 250GB storage + 1TB bandwidth - perfect for inspection images

# Space Name (the name you chose when creating the Space)
DO_SPACES_NAME=inspection-images

# Space Region (e.g., sgp1, nyc3, ams3, sfo3, fra1)
# Recommended: sgp1 (Singapore) for Asia-Pacific
DO_SPACES_REGION=sgp1

# Access Key (generated in DigitalOcean Dashboard -> API -> Spaces Keys)
DO_SPACES_KEY=

# Secret Key (generated in DigitalOcean Dashboard -> API -> Spaces Keys)
DO_SPACES_SECRET=

# Endpoint (optional - auto-generated from region if not set)
# Format: https://{region}.digitaloceanspaces.com
DO_SPACES_ENDPOINT=https://sgp1.digitaloceanspaces.com

# Application Settings
NEXT_PUBLIC_APP_NAME=PWA Inspection Platform
NEXT_PUBLIC_APP_VERSION=1.0.0

# =====================================================
# AUTHENTICATION CONFIGURATION
# =====================================================
# JWT Secret for token signing (REQUIRED - Generate a secure random string)
# Generate with: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET=your_super_secret_jwt_key_change_this_in_production

# JWT Token Expiration (default: 7 days)
JWT_EXPIRES_IN=7d

# Authentication Feature Flags
ENABLE_PIN_AUTH=true              # Set to false to disable PIN-based login
ENABLE_MICROSOFT_AUTH=true        # Set to false to disable Microsoft SSO
PREFER_MICROSOFT_AUTH=true        # Show Microsoft login as default option

# Email Domain Whitelist (comma-separated, required for Microsoft auth)
# Only users with emails from these domains can login via Microsoft
# Example: theta-edge.com,partner-company.com
ALLOWED_EMAIL_DOMAINS=theta-edge.com


# Admin Email Whitelist (for initial admin access only)
# These emails get admin role on first Microsoft login
# After first login, manage all user roles via Admin Panel (/admin/users)
# New Microsoft users default to "employee" role (can be changed by admin)
# Example: admin@theta-edge.com,it.manager@theta-edge.com
ADMIN_EMAIL_WHITELIST=

# Supervisor Email Whitelist (comma-separated, for Microsoft auth role assignment)
# Users with these specific email addresses will be assigned the 'supervisor' role
# Example: supervisor@theta-edge.com,team.lead@theta-edge.com
# Leave empty to disable whitelist-based supervisor assignment
SUPERVISOR_EMAIL_WHITELIST=


# Admin Email Whitelist (for initial admin access only)
# These emails get admin role on first Microsoft login
# After first login, manage all user roles via Admin Panel (/admin/users)
# New Microsoft users default to "employee" role (can be changed by admin)
# Example: admin@theta-edge.com,it.manager@theta-edge.com
ADMIN_EMAIL_WHITELIST=
AUTH_RATE_LIMIT_MAX_REQUESTS=5    # Max login attempts
AUTH_RATE_LIMIT_WINDOW_MS=900000  # Time window in ms (default: 15 minutes)

# =====================================================
# REDIS CONFIGURATION (OPTIONAL - Production Only)
# =====================================================
# Redis URL for persistent rate limiting (recommended for production)
# Development uses in-memory storage (resets on server restart)
# Production examples:
#   - Upstash Redis: redis://default:password@region.upstash.io:port
#   - Redis Cloud: redis://username:password@host:port
#   - Local Redis: redis://localhost:6379
# REDIS_URL=

# =====================================================
# LOGGING CONFIGURATION
# =====================================================
# Log level: debug, info, warn, error (default: info)
# Security events are always logged regardless of level
LOG_LEVEL=info
